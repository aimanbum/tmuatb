<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Rasmi Prestasi Hafazan SMKATB</title>
    <link rel="icon" type="image/png" href="logo.png">
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; color: #2c3e50; }
        .container { max-width: 1000px; margin: auto; background: #ffffff; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border-top: 6px solid #003366; }
        
        .header { text-align: center; margin-bottom: 30px; }
        .logo-sekolah { width: 80px; height: auto; }
        h1 { font-size: 22px; color: #003366; margin: 10px 0 5px 0; text-transform: uppercase; }
        .sub-header { font-size: 14px; color: #7f8c8d; }

        /* LAYOUT UTAMA (FLEX) */
        .main-layout { display: flex; gap: 30px; align-items: flex-start; }
        
        /* BAHAGIAN KIRI (PAUTAN) */
        .links-area { flex: 2; display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .btn { 
            display: flex; align-items: center; justify-content: center; padding: 25px 15px; 
            background: #ffffff; color: #003366; text-decoration: none; border: 1.5px solid #003366;
            border-radius: 10px; font-weight: bold; font-size: 13px; transition: 0.3s; text-align: center;
        }
        .btn:hover { background: #003366; color: white; transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        /* BAHAGIAN KANAN (SIDE BOX ENROLMEN) */
        .side-box { 
            flex: 1; background: #f8f9fa; padding: 20px; border-radius: 10px; 
            border: 1px solid #e1e8ed; position: sticky; top: 20px;
        }
        .side-box h3 { font-size: 15px; margin-top: 0; color: #003366; border-bottom: 2px solid #003366; padding-bottom: 5px; }
        
        .grand-total-box { background: #003366; color: white; padding: 15px; border-radius: 8px; margin-bottom: 15px; text-align: center; }
        .grand-total-box span { font-size: 28px; font-weight: 800; display: block; }
        
        .enrolmen-list { list-style: none; padding: 0; margin: 0; font-size: 13px; }
        .enrolmen-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dotted #ccc; }
        .enrolmen-item:last-child { border-bottom: none; }
        .tag-lp { font-size: 11px; color: #666; font-weight: normal; }

        /* RESPONSIVE */
        @media (max-width: 850px) {
            .main-layout { flex-direction: column; }
            .links-area { grid-template-columns: 1fr; width: 100%; }
            .side-box { width: 100%; box-sizing: border-box; position: static; }
        }

        .footer { text-align: center; margin-top: 40px; font-size: 11px; color: #bdc3c7; border-top: 1px solid #eee; padding-top: 15px; }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <img src="logo.png" alt="Logo SMKATB" class="logo-sekolah">
            <h1>Portal Hub Prestasi</h1>
            <div class="sub-header">SMKA TUNAS BAKTI (SMKATB)</div>
        </div>

        <div class="main-layout">
            <div class="links-area">
                <a href="https://drive.google.com/drive/folders/1Z07QYsqg-YRuqNiR4YXg7hQLwHGhCt8p?usp=sharing" class="btn" target="_blank">HALAQAH 2026</a>
                <a href="https://drive.google.com/drive/folders/1R4FdjBu_MviJWC51DVcEiyQpBSGGm-PG?usp=sharing" class="btn" target="_blank">REKOD HAFAZAN</a>
                <a href="https://aimanbum.github.io/dashboardhafazan/" class="btn" target="_blank">DASHBOARD</a>
                <a href="https://docs.google.com/spreadsheets/d/1xx5BP8lhLu6eqke5RfqEZUs3BnPgLS9u/edit?gid=1105382656#gid=1105382656" class="btn" target="_blank">RPT HIFZ 2026</a>
                <a href="https://forms.gle/MZYJB4YxUYbUkG238" class="btn" target="_blank">REKOD KHATAM</a>
                <a href="https://mylink.la/sekolah-3315" class="btn" target="_blank">ONE STOP CENTRE</a>
            </div>

            <div class="side-box">
                <h3>ENROLMEN 2026</h3>
                <div class="grand-total-box">
                    <h3>JUMLAH PELAJAR</h3>
                    <span id="grand-total">...</span>
                    <div style="font-size: 11px;" id="grand-detail">L: - | P: -</div>
                </div>
                <div class="enrolmen-list">
                    <div class="enrolmen-item"><b>T1</b> <span id="t1-total">...</span> <span class="tag-lp" id="t1-detail">L:- P:-</span></div>
                    <div class="enrolmen-item"><b>T2</b> <span id="t2-total">...</span> <span class="tag-lp" id="t2-detail">L:- P:-</span></div>
                    <div class="enrolmen-item"><b>T3</b> <span id="t3-total">...</span> <span class="tag-lp" id="t3-detail">L:- P:-</span></div>
                    <div class="enrolmen-item"><b>T4</b> <span id="t4-total">...</span> <span class="tag-lp" id="t4-detail">L:- P:-</span></div>
                    <div class="enrolmen-item"><b>T5</b> <span id="t5-total">...</span> <span class="tag-lp" id="t5-detail">L:- P:-</span></div>
                    <div class="enrolmen-item"><b>T6</b> <span id="t6-total">...</span> <span class="tag-lp" id="t6-detail">L:- P:-</span></div>
                </div>
            </div>
        </div>

        <div class="footer">
            SMKA TUNAS BAKTI &copy; 2026 | Dikemaskini secara langsung
        </div>
    </div>

    <script>
        const ssID = '1M5HM5y6qgWshsLqB8CoReXiF54sFiUBiS_dVqUtK0gk';
        const url = `https://docs.google.com/spreadsheets/d/${ssID}/gviz/tq?tqx=out:csv`;

        async function fetchEnrolmen() {
            try {
                const response = await fetch(url);
                const data = await response.text();
                const rows = data.split('\n').map(row => row.split(',').map(cell => cell.replace(/"/g, '')));
                const getData = (r, c) => parseInt(rows[r][c]) || 0;

                let grandL = 0; let grandP = 0;

                const processTingkatan = (id, row) => {
                    const l = getData(row - 1, 2);
                    const p = getData(row - 1, 3);
                    grandL += l; grandP += p;
                    document.getElementById(`${id}-total`).innerText = l + p;
                    document.getElementById(`${id}-detail`).innerText = `L:${l} P:${p}`;
                };

                processTingkatan('t1', 7);
                processTingkatan('t2', 13);
                processTingkatan('t3', 19);
                processTingkatan('t4', 25);
                processTingkatan('t5', 31);
                processTingkatan('t6', 36);

                document.getElementById('grand-total').innerText = grandL + grandP;
                document.getElementById('grand-detail').innerText = `LELAKI: ${grandL} | PEREMPUAN: ${grandP}`;
            } catch (e) { console.error('Error:', e); }
        }
        fetchEnrolmen();
    </script>
</body>
</html>
