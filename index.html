<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAMAN TMUATB</title>
    <link rel="icon" type="image/png" href="logo.png">
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: #f4f7f6; margin: 0; padding: 20px; color: #2c3e50; }
        .container { max-width: 900px; margin: auto; background: #ffffff; padding: 30px; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); border-top: 6px solid #003366; text-align: center; }
        
        .logo-sekolah { width: 90px; height: auto; margin-bottom: 10px; }
        h1 { font-size: 20px; color: #003366; text-transform: uppercase; margin: 5px 0; }
        .sub-header { font-size: 14px; color: #7f8c8d; margin-bottom: 30px; }

        .link-section { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 30px; }
        .btn { display: flex; align-items: center; justify-content: center; padding: 18px 10px; background: #ffffff; color: #003366; text-decoration: none; border: 1px solid #dee2e6; border-radius: 8px; font-weight: bold; font-size: 12px; transition: 0.3s; text-transform: uppercase; }
        .btn:hover { background: #003366; color: #ffffff; transform: translateY(-3px); }

        /* KOTAK JUMLAH BESAR (HERO STAT) */
        .total-enrolmen-banner {
            background: linear-gradient(135deg, #003366 0%, #00509d 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,51,102,0.2);
        }
        .total-enrolmen-banner h3 { margin: 0; font-size: 14px; text-transform: uppercase; opacity: 0.9; }
        .total-grand-number { font-size: 48px; font-weight: 800; margin: 5px 0; }
        .total-grand-detail { font-size: 14px; opacity: 0.8; }

        /* KOTAK ENROLMEN TINGKATAN */
        .enrolmen-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .stat-card { background: #ffffff; padding: 15px 5px; border-radius: 8px; border: 1px solid #e1e8ed; transition: 0.3s; }
        .stat-card h4 { margin: 0; font-size: 12px; color: #003366; }
        .stat-number { font-size: 22px; font-weight: bold; color: #333; margin: 5px 0; }
        .stat-detail { font-size: 11px; color: #666; }

        @media (max-width: 768px) {
            .link-section { grid-template-columns: 1fr; }
            .enrolmen-grid { grid-template-columns: repeat(2, 1fr); }
        }
        .footer { margin-top: 40px; font-size: 10px; color: #bdc3c7; border-top: 1px solid #eee; padding-top: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <img src="logo.png" alt="Logo SMKATB" class="logo-sekolah">
        <h1>LAMAN TMUA TOK BACHOK</h1>
       
        
        <div class="link-section">
            <a href="https://drive.google.com/drive/folders/1Z07QYsqg-YRuqNiR4YXg7hQLwHGhCt8p?usp=sharing" class="btn" target="_blank">HALAQAH 2026</a>
            <a href="https://drive.google.com/drive/folders/1R4FdjBu_MviJWC51DVcEiyQpBSGGm-PG?usp=sharing" class="btn" target="_blank">REKOD HAFAZAN</a>
            <a href="https://aimanbum.github.io/dashboardhafazan/" class="btn" target="_blank">DASHBOARD</a>
            <a href="https://docs.google.com/spreadsheets/d/1xx5BP8lhLu6eqke5RfqEZUs3BnPgLS9u/edit?gid=1105382656#gid=1105382656" class="btn" target="_blank">RPT HIFZ 2026</a>
            <a href="https://forms.gle/MZYJB4YxUYbUkG238" class="btn" target="_blank">REKOD KHATAM</a>
            <a href="https://mylink.la/sekolah-3315" class="btn" target="_blank">ONE STOP CENTRE</a>
        </div>

        <div class="total-enrolmen-banner">
            <h3>Jumlah Keseluruhan Pelajar</h3>
            <div class="total-grand-number" id="grand-total">...</div>
            <div class="total-grand-detail" id="grand-detail">Lelaki: - | Perempuan: -</div>
        </div>
        
        <div class="enrolmen-grid">
            <div class="stat-card"><h4>T1</h4><div class="stat-number" id="t1-total">...</div><div class="stat-detail" id="t1-detail">-</div></div>
            <div class="stat-card"><h4>T2</h4><div class="stat-number" id="t2-total">...</div><div class="stat-detail" id="t2-detail">-</div></div>
            <div class="stat-card"><h4>T3</h4><div class="stat-number" id="t3-total">...</div><div class="stat-detail" id="t3-detail">-</div></div>
            <div class="stat-card"><h4>T4</h4><div class="stat-number" id="t4-total">...</div><div class="stat-detail" id="t4-detail">-</div></div>
            <div class="stat-card"><h4>T5</h4><div class="stat-number" id="t5-total">...</div><div class="stat-detail" id="t5-detail">-</div></div>
            <div class="stat-card"><h4>T6</h4><div class="stat-number" id="t6-total">...</div><div class="stat-detail" id="t6-detail">-</div></div>
        </div>

        <div class="footer">
            Data Enrolmen dikemaskini secara automatik dari Google Sheets<br>
            SMKA TOK BACHOK &copy; 2026
        </div>
    </div>

    <script>
        const ssID = '1M5HM5y6qgWshsLqB8CoReXiF54sFiUBiS_dVqUtK0gk';
        const url = `https://docs.google.com/spreadsheets/d/${ssID}/gviz/tq?tqx=out:csv`;

        async function fetchEnrolmen() {
            try {
                const response = await fetch(url);
                const data = await response.text();
                const rows = data.split('\n').map(row => row.split(',').map(cell => cell.replace(/"/g, '')));
                const getData = (r, c) => parseInt(rows[r][c]) || 0;

                let grandL = 0;
                let grandP = 0;

                const processTingkatan = (id, row) => {
                    const l = getData(row - 1, 2);
                    const p = getData(row - 1, 3);
                    grandL += l;
                    grandP += p;
                    document.getElementById(`${id}-total`).innerText = l + p;
                    document.getElementById(`${id}-detail`).innerText = `L:${l} P:${p}`;
                };

                processTingkatan('t1', 7);
                processTingkatan('t2', 13);
                processTingkatan('t3', 19);
                processTingkatan('t4', 25);
                processTingkatan('t5', 31);
                processTingkatan('t6', 36);

                // Update Grand Total
                document.getElementById('grand-total').innerText = grandL + grandP;
                document.getElementById('grand-detail').innerText = `Lelaki: ${grandL} | Perempuan: ${grandP}`;

            } catch (e) { console.error('Error:', e); }
        }
        fetchEnrolmen();
    </script>
</body>
</html>
